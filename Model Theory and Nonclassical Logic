\documentclass{article}
\usepackage{graphicx} % Required for inserting images
\usepackage{James}
\usepackage{dynkin-diagrams}
\title{Model Theory and Non-classical Logic(s)}
\author{James Hindmarch}
\setcounter{section}{-1}
\numberwithin{thm}{subsection}
\date{October 2023}
\begin{document}

\maketitle
\tableofcontents
\newpage
\newlec
\section{Preliminaries}
Notation: If $\calL$ is a first order language, and $\calM$ is an $\calL$-structure and $\calA \subseteq \calM$ is a subset, we'll write $\calL_{\calA}$ for the languagte obtained by adding a new constant synbol to the signature of $\calL$ for each $a \in \calA$. $\calM$ is then naturally also an $\calL_{\calA}$ structure. \gap 
Convention: $\emptyset$ is considered an $\calL$-structure in this course. (Not everyone adopts this convention).
\begin{displayquote}
    Itaque illos planos, quos mathematicos vocant, plane consulere non desistebam, quod quasi nullum eis esset sacrificium, et nullae preces ad aliquem spiritum ob divinationem dirigerentur. quod tamen Christiana et vera pietas consequenter repellit et damnat.
\end{displayquote}
- Saint Augustine of Hippo (English below)
\begin{displayquote}
    Those impostors then, whom they style Mathematicians, I consulted without scruple; because they seemed to use no sacrifice, nor to pray to any spirit for their divinations: which art, however, Christian and true piety consistently rejects and condemns
\end{displayquote}
\section{Model Theory}
\subsection{Substructures and diagrams}
\begin{fancydefine}[$\calL$-homomorphism]
    Let $\calM$ and $\calN$ be $\calL$-structures. A $\calL$-homomorphism is a map \[
    \eta : \calM \to \calN \]
    such that, given $\bar{a}=(a_{1},\dots,a_{n}) \in \calM^n $, for all function symbols of arity $n$, we have \[
    \eta(f^{\calM}(\bar{a})) = f^{\calN}(\eta(\bar{a})). \] And for all relation symbols $\calR$ of arity $n$ we have \[ \bar{a} \in \calR^{\calM} \Leftrightarrow \eta(\bar{a}) \in \calR^{\calN}.\]
    We will call \textit{injective $\calL$-homomorphisms} $\calL$\textbf{-embeddings.} We will call \textit{invertible $\calL$-homomorphisms} $\calL$\textbf{-isomorphisms.}
    \gap
    If $\calM \subseteq \calN$ and the inclusion map is an $\calL$-homomorphism, we say that $\calM$ is a \textbf{substructure} of $\calN$ and that $\calN$ is an \textbf{extension} of $\calM$.
\end{fancydefine}
\ex \hspace{0.1cm}
\begin{enumerate}
    \item $\calL$ the language of groups (without the inverse operation, since it isn't strictly necessary), then $(\bbN, \, +, \, 0)$ is a substructure of the integers with the same operations, but not a subgroup.
    \item If $\calM$ is an $\calL$-structure, and $X \subseteq \calM$, then $X$ is the domain of a substructure of $\calM$ if and only if it is closed under the interpretation of all the function symbols (exercise).
\end{enumerate}
The \textbf{substructure generated by $X$} (i.e. the smallest substructure of $\calM$ which includes $X$) is the smallest subset of $\calM$ which contains $X$ and is closed under the interpretation of function symbols (also called the Skolem Hull). \gap
We denote the substructure generated by $X$ as $\langle X \rangle_{\calM}$. It is easy to check that $|\langle X \rangle_{\calM}| \leq |X| + |\calL|$. (Where $\calL$ denotes the cardinality of the number of sentences in $\calL$, and not the cardinality of the signature of $\calL$.) \gap
We notice a fact:
\[ (\bbR, \, \times, \, -1) \models \neg \exists x (x^{2} = -1) \]
but
\[ (\bbC, \, \times \, -1) \notmodels \neg \exists x (x^{2} = -1). \]
However $\bbR$ is a substructure of $\bbC$ (in some unnecessary to specify language), So what sorts of sentence \textit{are} preserved under substructures? \gap
Quantifier-free sentences are preserved! "They lack context."
\prop
Let $\phi(\bar{X})$ be a quantifier-free $\calL$-formula with $n$ variables, $\calM$ an $\calL$-structure, and $\bar{a} \in \calM^{n}$. \gap
Then for every extension $\calN$ of $\calM$, we have that $\calM \models \phi(\bar{a}) \Leftrightarrow \calN \models \phi(\bar{a})$.
\proof We proceed by induction on the structure of formulae. \gap
First, we show that if there is some term $t(\bar{x})$ with $k$ free variables then \[ t^{\calM}(\bar{b}) = t^{\calN}(\bar{b}) \] whenever $\bar{b} \in \calM^{k}$. This is clearly the case if $t=x_{i}$ is a variable as both structures interpret $t(\bar{b})$ as $b_{i}$. \gap
If $t$ is of the form $f(q_{1}, \dots, q_{l})$ for some function $f$ of arity $l$, and some terms $q_{i}$, then by induction we have that the $q_{i}$'s coincide for both structures, i.e. $q_{i}^{\calM}(\bar{b}) = q_{i}^{\calN}(\bar{b})$; therefore
\begin{align*}
    t^{\calM}&=f^{\calM}(q_{1}^{\calM}(\bar{b}) \dots q_{l}(\bar{b}))\\
    &= f^{\calN}(q_{1}^{\calM}(\bar{b}) \dots q_{l}^{\calM}(\bar{b}))\\
    &= f^{\calN}(q_{1}^{\calN}(\bar{b}) \dots q_{l}^{\calN}(\bar{b}))\\
    &= t^{\calN}(\bar{b})
\end{align*}
For $t_{1},\,t_{2}$ some free variables, we have
\begin{align*}
    \left(\calM \models (t_{1}(\bar{a}) = t_{2}(\bar{a}))\right) &\Leftrightarrow t_{1}^{\calM}(\bar{a})=t_{2}^{\calM}(\bar{a})\\
    &\Leftrightarrow t_{1}^{\calN}(\bar{a}) = t_{2}^{\calN}(\bar{a})\\
    &\Leftrightarrow \left(\calN \models (t_{1}(\bar{a}) = t_{2}(\bar{a}))\right).
\end{align*}
Then for other atomic formulae, we let
\[ \calR = (t_{1}, \dots, t_{n}) \]
be an $n$-arity relation symbol. Then
\[ \calM \models \calR(t_{1}(\bar{a}), \dots , t_{n}(\bar{a})) \]
if and only if
\[ t_{1}^{\calM}(\bar{a}),\dots,t_{n}^{\calM}(\bar{a}) \in \calR^{\calM}\]
which happens precisely if \[ (t_{1}^{\calM}(\bar{a}),\dots, t_{n}^{\calM}(\bar{a})) \in \calR^{n} \]
as $\calN$ extends $\calM$. But then the interpretation coincides, so
\[ (t_{1}^{\calN}(\bar{a}), \dots, t_{n}^{\calN}(\bar{a})) \in \calR^{\calN}\]
\[ \text{i.e. } \calN \models \calR(t_{1}(\bar{a}),\dots, t_{n}(\bar{a})).\]
Now we just need to clean up $\neg$ and $\wedge$: \gap
$\calM \models \neg \phi$ iff $\calM \notmodels \phi$ iff $\calN \notmodels \phi$ iff $\calN \models \neg \phi$.
\gap
and $\calM \models \phi \wedge \psi$ iff $\calM \models \phi$ and $\calM \models \psi$ iff $\calN \models \phi$ and $\calN \models \psi$ iff $\calN \models \phi \wedge \psi$. Now we can build everything quantifier free. \flushright $\Box$ \flushleft 







\newlec
\begin{fancydefine}[Elementarily equivalent/Elementary embedding]
    Structures $\calM$ and $\calN$ are \textbf{elementarily equivalent} if for every $\calL$-sentence
    \[ \calM \models \phi \Leftrightarrow \calN \models \phi. \]
    A map $f: \calM \to \calN$ is an \textbf{elementary embedding} if:
    \begin{itemize}
        \item It is injective
        \item $\forall \calL$-formulae $\phi(x_{1}, \dots, x_{n})$ and elements $m_{1}, \dots, m_{n} \in \calM$, we have that
        \[ \calM \models \phi(m_{1}, \dots, m_{n}) \Leftrightarrow \calN \models \phi(f(m_{1}), \dots, f(m_{n})).\]
    \end{itemize}
    This implies $\calM$ and $\calN$ are elementarily equivalent, and is therefore stronger.
    If $\calM$ and $\calN$ are elementarily equivalent, then we write \[ \calM \equiv \calN.\]
\end{fancydefine}
\remark If $\calM$ and $\calN$ are $\calL$-structures and $\bar{m} \in \calM$, $\bar{n} \in \calN$ are ordered tuples of the same size, then \[
(\calM, \bar{m}) \equiv (\calN, \bar{n})\]
means that these are equivalent when considered as $\calL$-structures with $k$ many constants: interpreted as $\bar{m}$ in $\calM$ and as $\bar{n}$ in $\calN$. That is to say, they are equivalent as $\calL_{\bar{c}}$-structures
\prop If $\calM \cong \calN$, then $\calM \equiv \calN$
\proof Left as exercise, but proceed by induction over the structure of formulae. \gap
Recall that a theory $\calT$ is complete if $\calT \proves \varphi$ or $\calT \proves \neg \varphi$ for every sentence $\varphi$. Any two models of the same complete theory are elementarily equivalent, but the models can have different cardinalities (and therefore not be isomorphic, so the implication can only go one way).
\define (Elementary substructure) A substructure $\calM \subseteq \calN$ is an \textbf{elementary substructure} if the inclusion map \[
\iota : \calM \to \calN \]
is an elementary embedding.
\define (Model-complete) A theory $\calT$ is called \textbf{model-complete} if every embedding between models of $\calT$ is elementary. (For example, the theory of algebraically closed fields is model-complete).
\define ($\kappa$-categorical) Let $\kappa$ be an infinite cardinal. We say that a theory $\calT$ is $\kappa$-categorical if all models of $\calT$ of cardinality $\kappa$ are isomorphic.
\prop (Vaught's Test)\\ 
Let $\calT$ be a consistent theory with no finite models. If $\calT$ is $\kappa$-categorical for some infinite $\kappa \geq |\calL|$ then $\calT$ is a complete theory.
\proof Suppose $\calT$ not complete and take $\varphi$ such that \[
\calT \nvdash \varphi \text{  and  } \calT \nvdash \neg \varphi\]
Then $\calT \cup \{\varphi\}$ and $\calT \cup \{\neg\varphi\}$ are consistent, so they have infinite models (since $\calT$ does). Then by Upward L\"owenheim-Skolem, they have models of size $\kappa$. As they are models of $\calT$ of size $\kappa$, they must be isomorphic. Howeve one model believes $\varphi$ and one believes $\neg\varphi$.\\ \flushright $\contradiction.$ $ \Box$ \flushleft
\exs \hspace{0.1cm}
\begin{enumerate}
    \item Any two countable dense linear orders without endpoints must be isomorphic to $\bbQ$, so Dense Linear Orders without endpoints are $\aleph_{0}$-categorical, hence complete.
    \item For any field, $F$, the theory of infinite vector spaces is $\kappa$-categorical for $\kappa> |F| $ (exercise). Hence this theory is complete.
\end{enumerate}

\begin{fancyprop}[Tarski-Vaught Test] (\textit{not} the same as Vaught's test)\\
Suppose $\calN$ is an $\calL$-structure and $M \subseteq \calN$, then $M$ is the domain of an elementary substructure if and only if, whenever $\bar{m} \in M$ and $\varphi(x,\bar{t})$ is a formula:
\[ \exists n \in \calN \text{  s.t.  } \varphi(n,\bar{m}) \text{ \normalfont implies that  } \exists \hat{m} \in M \text{  s.t.  } \calN \models \varphi(\hat{m}, \bar{m}).\]
\end{fancyprop}
\proof If $M$ is the domain of an elementary substructure, then this is clear, since \[\calN \models \exists x. \, \varphi(x,\bar{m}) \, \, \Rightarrow \, \, \calM \models \exists x. \, \varphi(x,\bar{m}).\] So we have that \[\calM \models \varphi(\hat{m},\bar{m})\] for some $\hat{m} \in M$. But then \[
\calN \models \varphi(\hat{m},\bar{m}).\]
Conversely, if $M \subseteq \calN$ has the stated property, consider the formulae:
\[ \varphi_{f}(x,\bar{t}) := x = f(\bar{t}) \] for each function symbol $f$ in $\calL$. So for any $\bar{m} \in M$, there is an $n \in \calN$ such that \[
\calN \models (n=f(\bar{m})),\]
so by hypothesis, there is $\hat{m} \in M$ such that $\calN \models (\hat{m} = f(\bar{m}))$. So it must be the case that $M$ is closed under the interpretations of function symbols. \gap
Interpretation relation symbols via \[ \calR^{\calM} = \calR^{\calN} \cup \calM^{k},\]
where $k$ is the number of elements in the tuples of the relation. Through this interpretaion, we turn $M$ into an $\calL$-structure which is clearly a substructure of $\calN$.
That $M$ is an \textit{elementary} substructure is clear, since quantifier free sentences must already hold by proposition 1.1.3, but then we can induct over formulae that contain existence quantifies by out hypothesis. \flushright $\Box$ \flushleft
\define A \textbf{universal formula} is one of the form \[ \forall \bar{x}. \, \varphi(\bar{x},\bar{y}),\] where $\varphi$ is quantifier-free. 
\define A \textbf{universal theory} is one whose axioms are (or can be) \textbf{universal sentences}.
\begin{fancydefine}[Diagram of an $\calL$-structure]
    Let $\calN$ be a $\calL$-structure, we define the \textbf{diagram} of $\calN$ to be: \[\diag(\calN) = \{ \varphi(n_{1}, \dots, n_{k}) \, : \, \varphi \text{ is a quantifier-free $\calL_{\calN}$ formula,}\] \[\text{ and $\calN \models \varphi(n_{1},\dots,n_{K})$}\}.\]
    The \textbf{elementary diagram} of $\calN$ is:
    \[\eldiag(\calN) = \{ \varphi(n_{1}, \dots, n_{k}) \, : \, \varphi \text{ is a $\calL_{\calN}$ formula, and $\calN \models \varphi(n_{1},\dots,n_{K})$}\}.\]
\end{fancydefine}
A model of the diagram of $\calN$ is an extension of $\calN$, and a model of the elementary diagram of $\calN$ is an elementary extension of $\calN$.
\lem Let $\calT$ be a consistent theory, and let $\calT_{\forall}$ be the theory of all universal sentences which $\calT$ proves. If we take a model $\calN$ of $\calT_{\forall}$, then $\calT \cup \diag(\calN)$ is consistent.
\proof Suppose $\calT \cup \diag(\calN)$is not consistent. We know that $\calT$ is consistent itself. Then compactness tells us that there is then a finite number of sentences in $\diag(\calN)$ which are inconsistent with $\calT$ (i.e. the ones that show up in the proof of $\bot$). \gap If $\varphi(\bar n)$ is their conjunction, then $\calT \cup \{ \varphi(\bar n) \}$ is inconsistent, that is: \[ \calT \proves \neg \phi(\bar n)\].
But $\calT$ has nothing to say about $\bar n$, since $\calT$ is an $\calL$ theory, not a $\calL_{\calN}$ theory (i.e. it does not 'recognise the existence of $\bar n$ specifically). Therefore \[ \calT \proves \forall \bar x.\, \neg \varphi (\bar x).\] This is a universal consequence of $\calT$, so it must hold in $\calN$. \endproof
\begin{fancythm}[Tarski, L\=os]
An $\calL$-theory $\calT$ has a universal axiomatization if and only if whenever $\calN$ is a substructure of $\calM$ and $\calM \models \calT$, then $\calN \models \calT$.
\end{fancythm}
\proof One direction is already done by proposition 1.1.3. So we proceed with the converse. \gap Suppose that $\calT$ is preserved under substructures. Then if $\calN \models \calT$, naturally $\calN \models \calT_{\forall}$. \gap Conversely, if $\calN \models \calT_{\forall}$, then by the previous lemma 1.1.13, \[ T \cup \diag(\calN)\] is consistent. Let $\calN^{*}$ be a model of $\calT \cup \diag(\calN).$ Then $\calN^{*}$ is an extension of $\calN$ and models $\calT$. So \[ \calN \subseteq \calN^{*} \models \calT. \]
Now, by the hypothesis on $\calT$, it is preserved under substructures, so \[ \calN \models \calT.\] Therefore $\calT$ and $\calT_{\forall}$ have the same models.
\endproof
We can obtain yet more results with the same 'method of diagrams.' \gap
\textbf{1. Finding a common elementary extension of given structures:} \gap
\begin{fancythm}[Elementary amalgamation]
    Let $\calM$ and $\calN$ be $\calL$-structures, and let $\bar m \in \calM^{k}$, $\bar n \in \calN^{k}$ such that \[ (\calM,\bar m) \equiv (\calN, \bar n).\] Then there is an elementary extension $\calK$ of $\calM$ such that there is an elementary embedding \[
        g : \calN \hookrightarrow \calK
    \]
    with $g(\bar n) = \bar m$.
\end{fancythm}
\proof By replacing $\calN$ with an isomorphic copy (if need be), we will assume $\bar m = \bar n$. \gap We'll show that \[ \calT := \eldiag(\calM) \cup \eldiag(\calN)\] is consistent (and, of course, we will use compactness). Suppose we are given a finite subset $\Phi$ of sentences in $\calT$ which includes a finite number of sentences from $\eldiag(\calN)$. Let the conjunction of these sentences be $\varphi (\bar m, \bar k)$ where $\phi(\bar x, \bar y)$ is a $\calL_{\calN}$-formula and $\bar k$ are pairwise distinct elements that occur in $\calN$ but not in $\bar m$. (That last sentence was just bookkeeping, don't think it means more than it does). \gap 
If $\Phi$ is inconsistent then \[ \eldiag(\calM) \proves \neg \varphi(\bar m, \bar k).\] Since elements in $\bar k$ are distinct and not in $\calM$, we must have: \[ \eldiag{\calM} \proves \forall \bar y. \, (\neg \varphi(\bar m, \bar k))\] So we have \[ (\calM,\bar m) \models \forall \bar y. \, \neg \varphi(\bar m, \bar y).\] But, by hypothesis,
\[ (\calM, \bar m) \equiv (\calN, \bar n).\] Therefore, it must be the case that \[ (\calN, \bar n) \models \forall \bar y \neg \varphi(\bar m, \bar y)\] But we assumed that $\varphi(\bar m, \bar k) \in \eldiag(\calN)$ $\contradiction$ By compactness, $\calT$ is consistent, then we can take $\calK$ to be the $\calL$-reduct of some model of $\calT$.
\endproof
\textbf{2. Controlling the size of a model:} \gap 
\begin{fancythm}[Stronger L\"owenheim-Skolem]
    Let $\calM$ be an infinite $\calL$-structure, and $\kappa \geq |calL|$ be an infinite cardinal. Then \begin{itemize}
        \item[$(\downarrow)$] If $\kappa < |\calM|$, then $\calM$ admits an elementary substructure of size $\kappa$.
        \item[$(\uparrow)$] If $\kappa > |\calM|$, then $\calM$ admits an elementary extension of size $\kappa$
    \end{itemize}
\end{fancythm}
\proof \hspace{0.1cm}
 \begin{itemize}
    \item[$(\downarrow)$] We will do this later, when we have a bit more firepower.
    \item[$(\uparrow)$] Expand $\calL$ by adding a constant for everything in $\calM$, and for everything in $\kappa$. Then let $\calT$ be \[\eldiag(\calN) \cup_{i\neq j \in \kappa} \{ c_{i} \neq c_{j} \}. \]
    \item[] By compactness, $\calT$ has a model, and this model must be of size $\geq \kappa$. Then we use $(\downarrow)$ to get of size \textit{exactly} $\kappa$. (In particular, a model of a countable language has a countable elementary substructure.)  
\end{itemize}










\newlec 
If we take some theory, is there some way to \textit{make} it universally axiomatizable?
\subsection{Existentially closed structures and quantifier elimination}
\begin{fancydefine}[Skolem Function/Skolemisation]
     Say we have an $\calL$-theory $\calT$, and some formula $\varphi(\bar x, \bar y)$ with non-empty $\bar x$. A \textbf{Skolem function} for $\varphi$ is an $\calL$-term $t$, such that: \[ \calT \proves \forall \bar x \, (\exists y. \varphi(\bar x, y) \Rightarrow \phi(\bar x, t(\bar x)))\]
A \textbf{Skolemisation} of an $\calL$-theory is a language $\calL^{+} \supseteq \calL$, together with an $\calL^{+}$-theory $\calT^{+} \supseteq \calT$ such that:
\begin{enumerate}
    \item Every $\calL$-structure that models $\calT$ can be expanded to a model of $\calT^{+}$
    \item The theory $\calT^{+}$ admits Skolem functions for every $\calL^{+}$-formula $\varphi(\bar x, y )$ with $\bar x \neq \emptyset$.
\end{enumerate}
A theory $\calT$ is a \textbf{Skolem theory} if it is a skolemisation of itself.
\end{fancydefine}
\begin{fancyprop}[Elimination of quantifiers?]
    Let $\calT$ be an $\calL$-theory, and $F$ a collection of $\calL$-formulae, which includes all the atomic formulae and is closed under boolean combinations ($\vee, \neg, \wedge$). \gap Then if for every formula in $\psi(\bar x,y)$ in $F$, we have $\varphi( \bar x)$ in $F$ such that \[ \calT \proves \forall \bar x \, (\exists y \psi(\bar x, y) \Leftrightarrow \phi(\bar x)),\] then every $\calL$-formula is equivalent (according to $\calT$, we will say \textit{modulo} $\calT$) to a formula in $F$ with the same free variables 
\end{fancyprop}
\proof Example Sheet 1.
\begin{fancyprop}
    Let $\calT$ be a Skolem $\calL$-theory. Then:
    \begin{enumerate}
        \item Every $\calL$-formula $\varphi( \bar x)$ is equivalent to some quantifier-free $\varphi^{*}(\bar x)$ modulo $\calT$. ($\bar x \neq \emptyset$).
        \item If $\calN \models \calT$ and $X \subseteq \calN$, then either $\langle X \rangle_{\calN} = \emptyset$ or $\langle X \rangle_{\calN} \preceq \calN$.
    \end{enumerate}
\end{fancyprop}
\proof \hspace{0.1cm}
\begin{enumerate}
    \item Clearly $\varphi(\bar x, t(\bar x))$ implies $\exists y.\, \varphi(\bar x, y)$ in any model, so having Skolem functions means that \[ \calT \models \forall \bar x (\exists \varphi(\bar x, y) \Leftrightarrow \varphi(\bar x, t(\bar x))).\] So we are done by 1.2.2.
    \item If $\calM = \langle X \rangle_{\calN}$ is the Skolem hull, $\bar m \in \calM$, and $\varphi(\bar x, y)$ is suc that $\calN \models \exists y. \varphi(\bar m, y)$, then there is an $\calL$-term $t$ (the associated Skolem function) such that $\calN \models \varphi(\bar m, t(\bar m))$. \gap Since $\calM$ is closed under function symbols \[ t^{|calN}(\bar m) \in \calM.\] By the Tarski-Vaught test (Prop 1.1.11), we have a witness to any existential statement, so $\calM \preceq \calN$. \endproof
\end{enumerate}
Skolem theories aren't usually found in nature (they are relatively unnatural, in fact). Fortunately, we \textit{can} construct them.
\begin{fancythm}[Skolemisation Theorem]
    Every (first-order) language $\calL$ can be expanded to some $\calL^{+} \supseteq \calL$ contianing $\Sigma$ such that:
    \begin{enumerate}
        \item $\Sigma$ is a Skolem $\calL^{+}$-theory,
        \item Any $\calL$-structure can be expanded to a $\calL^{+}$-structure that models $\Sigma$.
        \item $|\calL| = |\calL^{+}|$
    \end{enumerate}
\end{fancythm}
\idea Our language might lack Skolem functions, so we just need to add them in. We design $\calL^{+}$ to include Skolem functions for each suitable formula.
\proof If $\chi(\bar x, y)$ is an $\calL$-formula ($\bar x \neq \emptyset$), then we add a function symbol $F_{\chi}$ of arity $|\bar x|$. By doing this, we obtain a language $\calL'$ containing all these new functions. \gap Next, we define $\Sigma(\calL)$ to be the set of $\calL'$-sentences, which enforces that these function symbols are actually Skolem functions: \[ \forall \bar x \, (\exists y. (\chi(\bar x,y) \Rightarrow \chi(\bar x, F_{\chi}(\bar x)))). \]
There is a problem though, $\Sigma(\calL)$ is an $\calL'$ theory, not an $\calL$ theory. The solution is to iterate this $\omega$ times, as each stage $\Sigma_{n+1}(\calL)$ then says that you have Skolem functions for $\calL_{n}$-formulae at the previous step\footnote{We need to add Skolem functions for the new language's formulae, then add Skolem functions for those formulae, so we need a fixed point.}. \gap 
Start with $\calL_{0}= \calL$, and $\Sigma_{0} = \emptyset$. Then we define recursively: \[ \calL_{n+1} = \calL_{n}'\] and \[ \Sigma_{n+1}=\Sigma_{n} \cup \Sigma(\calL_{n}).\] Then \[ \calL^{+} = \bigcup_{n<\omega} \calL_{n}\] \[ \Sigma = \bigcup_{n< \omega} \Sigma_{n}.\] Note that every $\calL^{+}$ formula is in some $\calL_{n}$, and thus $\Sigma_{n+1} \subseteq \Sigma$ includes a sentence saying that there is a Skolem function for it. It is also clear that $|\calL^{+}| = |\calL|$. \gap We'll show the structure expansion property (2. I think) for $\calL'$ and $\Sigma(\calL)$. Then we get an interpretation for all the formulae that we add in the expansion by just 'proceeding up the chain' in exactly the same way we define $\calL^{+}$. For this we will need the axiom of choice. 
\gap First, assume the structure is non-empty, otherwise this is trivially true (since existence claims are always false). Take $\calM \neq \emptyset$ to be an $\calL-structure$. We expand this to an $\calL'$-structure: $\calM'$ in the following way: \gap Say we have $\chi( \bar x, y)$, ($\bar x \neq \emptyset$), and a tuple $\bar m \in \calM$. \begin{itemize}
    \item If there's a $b$ such that $\calM \models \chi(\bar m, b)$, then choose one such $b$, and interpret $F_{\chi}(\bar m)$ as $b$.
    \item If there is no such $b$, then just set $F_{\chi}(\bar m) = m_{1}$ (the first entry of $\bar m$, whatever, it doesn't matter).
\end{itemize}
Then by construction ($\calM' \models (*)$) where (*) is the skolem sentence about forall  x and stuff.
\corollary Any theory $\calT$ admits a skolemisation $\calT^{+}$ in a language of the same cardinality.
\proof Take $\calT^{+}$ to be $\calT \cup \Sigma$. Any model of $\calT^{+}$ is of course a model of $\Sigma$, so $\calT^{+}$ must have skolem functions. Moreover, any $\calL$-structure $\calM$ that has $\calM \models \calT$ can be expanded to one that has $\calM^{+} \models \Sigma$, in fact, so that we have $\calM \models \calT^{+}$.
\endproof 
\corollary Let $\calM$ be an $\calL$-structure $X \subseteq \calM$ with \[|\calL| + |X| \leq \kappa \leq |\calM|.\] Then $\calM$ has an elementary substructure $\calN$ of size $\kappa$ that contains $|X|$.
\proof \newlec First, we pick a subset $Y$ of $\calM$ containing $X$, and of size $\kappa$. Let $M'$ be an expansion of $\calM$ to a Skolem theory, and consider the Skolem Hull of $Y$ in $M'$, $\langle Y \rangle_{M'}$. We know that $\langle Y \rangle_{M'}$ is an elementary substructure of $M'$, since any non-empty Skolem Hull is an elementary substructure by part 2 of 1.2.3, and so if we take $\calN$ to be the $\calL$-reduct of this $\langle Y \rangle_{M'}$, then $\calN \preceq \calM$ and $X \subseteq \calN$. Now we just need to check that the sizes work out appropriately, as: \[ |\calN|\leq |Y| + |\calL^{+}| = \kappa + |\calL| = \kappa = |Y| \leq |\calN|\], so we have $|\calN| = \kappa$. \endproof
\begin{fancydefine}{Elimination Set}
    Let $\calT$ be an $\calL$-theory. A set $F$ of $\calL$-formulae is an \textbf{elimination set} for $\calT$ if, for every $\calL$-fomrula $\varphi$, there is a Boolean combination $\varphi^{*}$ of formulae in $F$ such that \[ \calT \proves \varphi \Leftrightarrow \varphi^{*} \] A theory $\calT$ has quantifier-elimination if the family of all quantifier-free $\calL$-formulae forms an elimination set of $\calT$.
\end{fancydefine}
\begin{ex}
    Consider a polynomial $p(x)=x^{3}-31x^{2}+6$. To determine whether the sentence \[ \exists x.\, p(x)=0\] holds in an algebraically closed field, we can equivalently check the quantifier-free sentence: \[ (1 \neq 0) \wedge (31 \neq 0). \] since this means there must be a root. \gap Similarly, suppose I had a matrix over $\bbR$, then the sentence which says "$M$ is invertible" is equivalent to \[ \neg (\det(M)=0).\]
\end{ex}
Why care about quantifier elimination?
\begin{enumerate}
    \item Deciding whether two models of $\calT$ are elementarily equivalent is just reduced to verifying whether they satisfy the same sentences in the elimination set.
    \item In particular, completeness of $\calT$ is reducible to checking if all sentences in $F$ are deducible from $\calT$, or inconsistent with it.
    \item If the language is recursive, and the procedure for quantifier elimination is computable, then the problem of decidability for sentences in $\calT$ is reduced to the problem of decidability for sentences in $F$.
    \item The elementary embeddings $\calM \hookrightarrow \calN$ become exactly those embedding that preserve $\varphi$ and $\neg \varphi$ for $\phi \in F$. This has nice implications about our theory being model complete\footnote{which I didn't quite hear}.
    \item Figuring out which subsets are definable is much easier once you have an elimination set. Definable subsets are simply the Boolean combinations of subsets definable by formulae in $F$.
\end{enumerate}
In what follows, we use the notation $\neg F$ for the set of all the negations of things in $F$.
\begin{fancyprop}{Syntactic Quantifier Elimination}
    Suppose we have an $\calL$-theory $\calT$, and $\calF$ a family of $\calL$-formulae which includes all the atomic formulae. Suppose that for every $\calL$-formula of the form \[ \theta(\bar x) := \exists y. \, \bigwedge_{i<n} \varphi_{i}(\bar x, y) \] with $\phi_{i} \in \calF \cup \neg \calF$, that there is a Boolean combination $\theta^{*}$ of $\calF$-formulae such that: \[ \calT \proves \forall \bar x. \, (\theta(\bar x) \Leftrightarrow \theta^{*}(\bar x)\] Then $\calF$ is an elimination set for $\calT$. 
\end{fancyprop}
\proof See proposition 1.2.2.
\begin{ex}
    The theory $\calT_{\infty}$ of infinite sets in the language with empty signature (so all atomic formulae are equalities and the only terms are variables, no function or relation symbols). This has quantifier-eliimination, since by proposition 1.2.9, it is enough to eliminate the existential quantifier in formulae $\varphi(x_{0}, \dots, x_{n-1})$ of the form: \[ \exists y.\,(\bigwedge_{I}y=x_{i} \wedge \bigwedge_{J}(y \neq x_{j}) \wedge \bigwedge_{K^{2} (k \neq k')} x_{k} = x_{k'} \wedge \bigwedge_{L^2 (l \neq l')} x_{l} \neq x_{l'}). \] WLOG, we can assume that $I=\emptyset$. Then define \[ \psi(x_{0},\dots, x_{n-1}) := (\bigwedge_{K^{2} \setminus K \times K} x_{k} \neq x_{k'} \wedge \bigwedge_{L^{2} \setminus L \times L}).\] As this formula doesn't contain $y$, we have $\phi(x_{0}, \dots, x_{n-1})$ is equivalent to \[\exists y. \, \wedge_{J} y \neq x_{j} \wedge \psi(x_{0},\dots x_{n-1}) \] We then conclude that $\varphi$ and $\psi$ are equivalent mod $\calT$, since $\calT_{\infty} \proves \forall \bar x. \, (\exists y. (y \neq x_{j}))$.
\end{ex}
\hspace{0.1cm}\\
\newlec \begin{fancydefine*}{$\Rightarrow_{1}$} If $\calM$ and $\calN$ are $\calL$-structures, we write $\calM \Rightarrow_{1} \calN$ if every existential sentence modelled by $\calM$ is also modelled by $\calN$.
\end{fancydefine*}
\begin{fancythm}{Existential Amalagmation} Let $\calM$ and $\calN$ be two $\calL$-structures, $S$ a subet of $\calM$, and $f: \langle S \rangle_{\calM} \to \calN$ a homoorphism such that \[ (\calN,f(S)) \Rightarrow_{1} (\calM,S).\] Then we can find an elementary extension of $\calM$, $\calK$, and an (not necessarily elementary) embedding $\calN \to \calK$ which makes the following diagram commute \begin{center}
    \begin{tikzcd}
        & \calK & \\
    \calM \arrow[hookrightarrow]{ur}{\preceq} & &  \arrow[hookrightarrow]{ul}[swap]{g}\calN\\
     & \langle S \rangle_{M} \arrow{ur}[swap]{f} \arrow[hookrightarrow]{ul} &
    \end{tikzcd}
\end{center} 
\end{fancythm}
\proof This is similar to theorem 1.1.15, and left as an exerice.
\endproof
We say that a class $\bbK$ of $\calL$-structures has the \underline{amalgamation property} when, given $\bbK$-structures: $\calA, \calB, \calC$ and embeddings \[ \calB \xhookleftarrow{e}\calC \xhookrightarrow{f} \calA \] there is a structure $D$ in $\bbK$ and embeddings \[ \calB \xhookrightarrow{g} \calD \xhookleftarrow{h} \calA.\] Making the following diagram commute:
\begin{center}
    \begin{tikzcd}
        & \calD & \\
    \calB \arrow[hookrightarrow]{ur}{g} & &  \arrow[hookrightarrow]{ul}[swap]{h}\calA\\
     & \calC \arrow{ur}[swap]{f} \arrow[hookrightarrow]{ul}{e} &
    \end{tikzcd}
\end{center} 
\begin{fancydefine}{Existentially closed}
    Let $\bbK$ be a class of $\calL$-structures, and $M \in \bbK$. We say that $\calM$ is \textbf{existentially cloed} in $\bbK$ if, for every existential formula $\Psi(\bar x)$ and tuple $\bar m \in \calM$, the existence of an extension $\calM \subseteq \calN$ with $\calN \models \Psi(\bar m)$ and $\calN \in \bbK$ forces $\calM \models \Psi(\bar m)$.
\end{fancydefine}
\begin{exs} \hspace{0.1cm}
    \begin{enumerate}
        \item[(a)] Every existentially closed field is algebraically closed.\gap Let $\calA$ be existentially closed, and view a non-trivial polynomial $f( \bar y)$ over it as $p(\bar a, y)$ where $p(\bar x,y)$ is a term in $\calL_{\text{ring}}$ and $\bar a \in A$ (e.g.  See $y^{2} + 2y +3$ as $p(1,2,3,y)$ where $p(x_{0},x_{1},x_{2},y)=x_{0}y^{2}+x_{1}y+(-x_{2}).$) We can replace $f$ by an irreducible factor if need be, and take the quotient $\frac{A[y]}{(f)}$, which is a field extension of $\calA$ in which $f$ has a root, i.e. \[ \frac{A[y]}{(f)} \models \exists y.\, p(\bar a, y)=0.\] As $\calA$ is existentially closed, $\calA \models \exists y.\, p(a,y) =0$, i.e. $f$ has a root in $\calA$. In fact the existentially closed fields are precisely the algebraically closed ones. If $\calA$ is algebraically closed, then you can't solve more systems of equations and inequations over $\calA$ by considering field extensions.
        \item[(b)] The existentially closed lienar orders are the dense total orders without endpoints.
        \item[(c)] The existentially closed ordered fields are the \underline{real closed fields} (i.e. the ones that are elementarily equivalent to the real numbers, or an ordered field such that all the non-negative elements are squares, and all the odd polynomials have a root).
    \end{enumerate}
\end{exs}
\begin{fancythm}{}
    Let $\bbK$ be a class of $\calL$-structures, closed under isomorphims, and such that the class of all substructures of $\bbK$ structures has the amalgamation property. Then every existential $\calL$-formula is equivalent to a quantifier-free one in all existentially closed structures in $\bbK$. \gap In particular, if $\calT$ is a theory axiomatising existentially closed structures in $\bbK$, then $\calT$ has quantifier elimination.
\end{fancythm}
\proof For $\phi(\bar x)$ an existential formula, call a pair $(\calM, \bar m)$ a \underline{witnessing pair} if $\calM$ is existentially closed in $\bbK$, and $\calM \models \phi ( \bar m )$. For each such pair, let $\theta_{(\calM,\bar m)}(\bar x)$ be the conjunction of all the literals $\psi(\bar x)$ such that $\calM \models \psi( \bar m )$, and $\chi( \bar x )$  be the disjunction of all the $\theta_{(\calM, \bar m)}(\bar x)$ where $(\calM, \bar m)$ is a witnessing pair\footnote{These statements might be infinitary but it is okay by compactness basically.}.\gap It is enough to argue that if $\calN$ is existentially closed in $\bbK$, then $\calN \models \phi(\bar n)$ iff $\calN \models \chi(\bar n)$. If $\bar n \in \calN$ is such that $\calN \models \phi(\bar n)$, then $(\calN, \bar n)$ is a witnessing pair, and thus $\calN \models \chi( \bar n)$. \gap Conversely, if $\calN \models \chi(\bar n)$, then there must be a witnessing pair $(\calM, \bar m)$ such that $\calN \models \theta_{(\calM, \bar m)}(\bar n)$, i.e. if $\psi(\bar x)$ is a literal, and $\calM \models \psi(\bar m)$ then we must have $\calN \models \psi( \bar n)$. There is thus an embedding \[ e: \langle \bar m \rangle_{\calM} \to \calN\] which maps $\bar m$ to $\bar n$. The amalgamation property then provides some substructure $\calC$ which embeds into $\calD$ where $\calD \in \bbK$ and both $\calM$, $\calN$ embed into $\calC$ (and therefore also into $\calD$). \\
\begin{center}
    \begin{tikzcd}
        & \calD &\\
        & \calC \arrow[hookrightarrow]{u} & \\
    \calM \arrow[hookrightarrow]{ur} \arrow[uur, "g",dashrightarrow,bend left = 20] & &  \arrow[hookrightarrow]{ul} \arrow[uul,"h",dashrightarrow,swap, bend right =20]\calN\\
     & \langle \bar{m} \rangle_{M} \arrow{ur}[swap]{e} \arrow[hookrightarrow]{ul} &
    \end{tikzcd}
\end{center}

We thus have embeddings $\calM \xhookrightarrow{g} \calD \xhookleftarrow{h} \calN$ with $g(\bar m) = (h \circ e)(\bar m) = h(\bar n).$ By potentially replacing $\calD$ with an isomorphic copy, we may assume that $h$ is an inclusion, so $g(\bar m) = \bar n$.\gap We know that $\calM \models \varphi(\bar m)$, but then $\calD \models \varphi(g(\bar m))$ as $\varphi$ is existentialy and $\calM \subseteq \calD$. Since $\calN$ is existentially closed in $\bbK$, $\calD \in \bbK$, and $\calN \subseteq \calD$, so we conclude that $\calN \models \varphi(g(\bar m))$, i.e. $\calN \models \phi(\bar n)$. If $\calT$ axiomatises existentially closed structures in $\bbK$, then the result follows from the completeness theorem and the syntactic criterion for quantifier elimination (proposition 1.2.9). \endproof
\newlec
\begin{exs}\hspace{0.1cm}
    \begin{enumerate}
        \item The theory ACF of algebraically closed fields has quantifier elimination. Indeed, recall that ACF axiomatises the existentially closed fields. So by Theorem 1.2.14, we just need to check that the class of all substructures of fields, (i.e. integral domains) has the amalgamation property. Field theory tells us that fields have the amalgamation property, so to show integral domains do, just take the fraction field and then use the amalgamation property for fields to extend it to integral domains.
        \item The theory DLO of dense linear orders without endpoints has quantifier elimination and has the amalagamation property. This can be proved syntactically, or by using the fact that any two linear orders embed into a poset, since by Zorn's lemma, a poset embeds into a linear order.
    \end{enumerate}
\end{exs}
\begin{fancydefine}{Inductive class}
    A class $\bbK$ of $\calL$-structures is \textbf{inductive} if it is closed under isomorphisms and also under unions of embedding chains. \gap We don't talk about models, because e.g. the class of groups without an element of infinite order is an inductive class, but that property is not first-order axiomatisable. So this is slightly more general.
\end{fancydefine}
\begin{fancythm}{}
    Let $\calM$ be a structure in an inductive class $\bbK$. Then $\calM$ is a substructure of $\calN$, $\calM \subseteq \calN$ for some $\calN$ existentially closed in $\bbK$.
\end{fancythm}
\idea Just like with the proof that every field has an algebraic closure, we add elements solving all the polynomials, and then keep adding elements for the new polynomials, and take the union overall and show that this must be algebraically closed. This is just an extension of this idea.
\proof We show that $\calM$ can be extended to some structure $\calM^{*}$ which is still in $\bbK$ with the following property: \gap For all $\bar m \in \calM$ and for every existential formula $\phi(\bar x)$ if $\phi(\bar m)$ holds in some extension of $\calM^{*}$ in $\bbK$, then it holds in $\calM^{*}$. \gap 
First we show that this would be enough to prove the theorem. Indeed, we can recurively define a chain of $\bbK$-structures by \begin{align*}
    \calM^{(0)}&=\calM\\
    \calM^{(j+1)}&=\calM^{(j)}
\end{align*}
and then take its union \[ \calN = \bigcup_{j < \omega} M^{(j)}\] This is in $\bbK$ (as $\bbK$ is inductive) and extends $\calM$. Moreover, $\calN$ is existentiall closed in $\bbK$. Suppose that $\phi(\bar x)$ is an existential formula, $\bar n \in \calN$, and $\calD$ is a structure in $\bbK$ such that $\calD \models \phi( \bar n)$. As \[ \bar n \in \calN = \bigcup_{j<\omega}\calM^{(j)}\] and the $\calM^{(j)}$ form a chain, $\bar n \in \calM^{(k)}$ for some $k< \omega$. So $\calM^{(k+1)} \models \phi(\bar n)$ as $\calM^{(k+1)} = (\calM^{(k)})^{*}$ and $\calD$ also extends $M^{(k+1)}$. Since existential sentences are closed under extensions, $\calN \models \phi( \bar n)$. \gap 
To show that we can build such an $\calM^{*}$, we list all the pairs $(\phi_{\beta},\bar{m}_{\beta})_{\beta < \delta}$ where $\phi$ is an existential formula, and $\bar m \in \cal M$. We then construct a chain of $\bbK$-structures by transfinite induction. We build this by setting $\calM_{0}=\calM$, and set $\calM_{\beta+1}$ to be some $\bbK$-structure $\calD$ with $\calM_{\beta} \subseteq \calD \models \phi_{\beta}(\bar m_{\beta})$, if it exists, otherwise we set it to be $\calM_{\beta}$. Then $M_{\lambda} = \cup_{\beta < \lambda} M_{\beta}$, for $\lambda$ a limit ordinal. Then $\calM^{*}=\calM_{\delta}$.
 \gap If $\phi(\bar x)$ is existential, $\bar m \in \calM$, and $\calD \in \bbK$ is such that $\calM^{*} \subseteq \calD \models \phi(\bar m)$, then $(\phi, \bar m)$ is $(\phi_{\beta}, \bar m_{\beta})$ for some $\beta< \delta$. Then $\calM_{\beta} \subseteq \calM^{*} \subseteq \calD$, so the clause in the definiton of $M_{\beta +1}$ holds true, and we must have that $\calM_{\beta +1} \models \phi(\bar m)$. As $\phi$ is existential, and $\calM^{*}$ extends $\calM_{\beta +1}$, we have $\calM^{*} \models \phi(\bar m)$. \endproof
 \begin{fancythm}{}
    Let $\calT$ be an $\calL$-theory. The following are equivalent: \begin{enumerate}
        \item[(a)] $\calT$ has quantifier elimination 
        \item[(b)] If $\calA$,$\calB \models \calT$ and $\bar a \in \calA^{n}$ and $\bar b \in \calB^{n}$ are such that $(\calA, \bar a)$ and $(\calB, \bar b)$ satisfy the same quantifier free sentences $((\calA,\bar a) \equiv (\calB), \bar b)$, then $(\calA, \bar a) \Rightarrow_{1} (\calB, \bar b)$.
        \item[(c)] Whenever $\calA, \calB \models \calT$, $S$ is a subset of $\calA$ and $e: \langle S \rangle_{\calA} \hookrightarrow \calB$, then there is an elementary extension $\calD$ of $\calB$ and an embedding $f: A \hookrightarrow \calD$ extending $e$.
        \item[(d)] The theory $\calT$ is model-complete, and $\calT$ has the amalgamation property.
        \item[(e)] For every quantifier free formula $\phi(\bar x,y)$ the formula $\exists y. \phi(\bar x, y)$ is $\calT$-equivalent to a quantifier-free formula $\Psi(x)$.
    \end{enumerate}
 \end{fancythm}
 \proof \hspace{0.1cm} \begin{enumerate}
    \item[$(a) \Rightarrow (b)$:] This is obvious, since if $\calT$ has quantifier elimination, then every formula is equivalent to a quantifier free formula, so $\calA$ and $\calB$ satisfy the same sentences by assumption
    \item[$(b) \Rightarrow (c)$] It is enough to show that $(\calA, \bar a) \Rightarrow_{1} (\calB, e(\bar a))$ by theorem 1.2.11. Since a sentence in $\calL_{S}$ can only mention finitely many of the new constants in $S$, it's enough to check that $(\calA, \bar a) \Rightarrow_{1} (\calB, e(\bar a))$ for all tuples $\bar a$ obtainable from $S$. Now, if $\bar a$ is such a tuple, and $e: \langle S \rangle_{\calA} \hookrightarrow \calB$ is an embedding, then $(\calA, \bar a) \equiv_{0} (\calB, e(\bar a))$\footnote{$\equiv_{0}$ means they satisfy the same quantifier-free sentences}, so we're done by (b).
 \end{enumerate}












\end{document}
